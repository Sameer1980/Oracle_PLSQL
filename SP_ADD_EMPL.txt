CREATE OR REPLACE PROCEDURE SP_ADD_EMPLOYEE(F_NAME EMPLOYEES.FIRST_NAME%TYPE,
                                            L_NAME EMPLOYEES.LAST_NAME % TYPE, 
                                            E_MAIL EMPLOYEES.EMAIL%TYPE,
                                            DEPT_NO NUMBER ) AS
                                            
                                            
V_JOB EMPLOYEES.JOB_ID%TYPE DEFAULT 'SA_REP';
V_MGR EMPLOYEES.MANAGER_ID%TYPE DEFAULT 145;
V_SAL EMPLOYEES.SALARY%TYPE DEFAULT 1000;
V_COMM EMPLOYEES.COMMISSION_PCT%TYPE DEFAULT 0;
V_DEPTID EMPLOYEES.DEPARTMENT_ID%TYPE DEFAULT 30;


DEPT_NO_EXIST EXCEPTION;


BEGIN

IF SF_VALID_DEPTID (DEPT_NO) = TRUE THEN 

INSERT INTO 
EMP
(
EMPLOYEE_ID,
FIRST_NAME,
LAST_NAME,
HIRE_DATE,
EMAIL,
JOB_ID,
MANAGER_ID,
SALARY,
COMMISSION_PCT,
DEPARTMENT_ID 
)
VALUES
(
EMPLOYEES_SEQ.NEXTVAL,
F_NAME,
L_NAME,
TRUNC(SYSDATE),
E_MAIL,
V_JOB,
V_MGR,
V_SAL,
V_COMM,
V_DEPTID
);

COMMIT;
ELSE 

RAISE DEPT_NO_EXIST;

END IF;

EXCEPTION
WHEN DEPT_NO_EXIST THEN
DBMS_OUTPUT.PUT_LINE('ERR-0102: DEPARTMENT DOES NOT EXIST');

ROLLBACK;
  
END; 