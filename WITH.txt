with
summary as
(select b.department_name,sum(a.salary) DEPT_TOTAL
from
employees a,
departments b
where 
a.department_id=b.department_id(+)
group by b.department_name
)
SELECT * FROM SUMMARY WHERE DEPT_TOTAL>(SELECT 1/8*SUM(DEPT_TOTAL) FROM SUMMARY) 



WITH QUERY1 AS
(SELECT B.DEPARTMENT_NAME,SUM(A.SALARY) AS DEPT_TOTAL FROM EMPLOYEES A,DEPARTMENTS B WHERE A.DEPARTMENT_ID=B.DEPARTMENT_ID(+)
GROUP BY B.DEPARTMENT_NAME),
QUERY2 AS(SELECT 1/8*SUM(DEPT_TOTAL) AS TOTAL_COST FROM QUERY1)

SELECT * FROM QUERY1 WHERE DEPT_TOTAL>(SELECT TOTAL_COST FROM QUERY2);  

