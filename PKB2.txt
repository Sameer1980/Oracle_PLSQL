CREATE OR REPLACE PACKAGE BODY SPK_EMP_PKG AS

FUNCTION VALID_DEPTID (P_DEPTID DEPARTMENTS.DEPARTMENT_ID%TYPE)  RETURN BOOLEAN AS
V_DEPTID DEPARTMENTS.DEPARTMENT_ID%TYPE;
BEGIN

SELECT COUNT(*) INTO V_DEPTID FROM DEPARTMENTS WHERE DEPARTMENT_ID=P_DEPTID;
IF V_DEPTID=0 THEN
RETURN FALSE;
ELSE
RETURN TRUE;
END IF;

END;


PROCEDURE ADD_EMPLOYEE (P_DEPTID EMPLOYEES.DEPARTMENT_ID%TYPE, P_EMPNAME VARCHAR2,P_EMAIL EMPLOYEES.EMAIL%TYPE) AS
BEGIN

IF VALID_DEPTID(P_DEPTID)=TRUE THEN
INSERT INTO EMP 
(EMPLOYEE_ID,
FIRST_NAME,
LAST_NAME,
EMAIL,
PHONE_NUMBER,
HIRE_DATE,
JOB_ID,
SALARY,
COMMISSION_PCT,
MANAGER_ID,
DEPARTMENT_ID
)
VALUES
(
EMPLOYEES_SEQ.NEXTVAL,
NULL,
P_EMPNAME,
P_EMAIL,
NULL,
TRUNC(SYSDATE),
'SA_REP',
1000,
0,
145,
P_DEPTID
);

ELSE
DBMS_OUTPUT.PUT_LINE('DEPARTMENT DOES NOT EXIST');
END IF;
END;



PROCEDURE GET_EMPLOYEE (SAL OUT NOCOPY EMPLOYEES.SALARY%TYPE,JOB OUT NOCOPY EMPLOYEES.JOB_ID%TYPE,P_EMPID EMPLOYEES.EMPLOYEE_ID%TYPE)AS
BEGIN
SELECT SALARY,JOB_ID INTO SAL,JOB FROM EMPLOYEES WHERE EMPLOYEE_ID=P_EMPID;
END;

END;
/
SHOW ERRORS;