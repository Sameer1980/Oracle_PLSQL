CREATE OR REPLACE PACKAGE BODY SPK_JOB_PKG IS

FUNCTION GET_JOB (P_JOBID JOBS.JOB_ID%TYPE) RETURN VARCHAR2 IS
V_TITLE JOBS.JOB_TITLE%TYPE;
BEGIN
SELECT job_title INTO V_TITLE FROM JOBS WHERE JOB_ID=P_JOBID;
RETURN (V_TITLE);
END;

PROCEDURE ADD_JOB(P_JOBID JOBS.JOB_ID%TYPE , P_TITLE JOBS.JOB_TITLE%TYPE) IS
BEGIN
INSERT INTO JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY)
VALUES (P_JOBID,P_TITLE,NULL,NULL);
commit;
END;

PROCEDURE UPD_JOB (P_JOBID JOBS.JOB_ID%TYPE , P_TITLE JOBS.JOB_TITLE%TYPE) IS
NO_JOB_FOUND EXCEPTION;
V_COUNT NUMBER(4);
BEGIN
SELECT COUNT(*) INTO V_COUNT FROM JOBS;
IF V_COUNT=0 THEN
RAISE NO_JOB_FOUND;
ELSE
UPDATE JOBS SET JOB_TITLE=P_TITLE WHERE JOB_ID=P_JOBID;
END IF;
commit;
EXCEPTION
WHEN NO_JOB_FOUND THEN
DBMS_OUTPUT.PUT_LINE('ERROR-0101, JOB NOT FOUND');
END;

PROCEDURE DEL_JOB (P_JOBID JOBS.JOB_ID%TYPE) IS
NO_JOB_FOUND EXCEPTION;
V_COUNT NUMBER(4);
BEGIN
SELECT COUNT(*) INTO V_COUNT FROM JOBS WHERE JOB_ID=P_JOBID;
IF V_COUNT=0 THEN
RAISE NO_JOB_FOUND;
ELSE
DELETE FROM JOBS WHERE JOB_ID=P_JOBID;
END IF;
commit;
EXCEPTION
WHEN NO_JOB_FOUND THEN
DBMS_OUTPUT.PUT_LINE('ERROR-0101, JOB NOT FOUND');
END;
END SPK_JOB_PKG;  
